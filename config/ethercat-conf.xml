<masters>
  <master idx="0" appTimePeriod="${ETHERCAT_APP_TIME_PERIOD}" refClockSyncCycles="${ETHERCAT_REF_CLOCK_SYNC_CYCLES}">
    <!--
      Beckhoff hardware profile chain:
      slave 0: EK1100 coupler
      slave 1: EL7031 stepper terminal (X)
      slave 2: EL7031 stepper terminal (Y)
    -->

    <slave idx="0" type="generic" vid="${ETHERCAT_COUPLER_VID}" pid="${ETHERCAT_COUPLER_PID}" configPdos="false"/>

    <slave idx="1" type="generic" vid="${ETHERCAT_EL7031_VID}" pid="${ETHERCAT_EL7031_PID}" configPdos="true">
      <dcConf assignActivate="300" sync0Cycle="*1" sync0Shift="0"/>
      <syncManager idx="2" dir="out">
        <pdo idx="1600">
          <pdoEntry idx="7010" subIdx="01" bitLen="1" halPin="st-enable" halType="bit"/>
          <pdoEntry idx="7010" subIdx="11" bitLen="16" halPin="velocity-cmd" halType="s32"/>
        </pdo>
      </syncManager>
      <syncManager idx="3" dir="in">
        <pdo idx="1a00">
          <pdoEntry idx="6010" subIdx="04" bitLen="1" halPin="error" halType="bit"/>
          <pdoEntry idx="6010" subIdx="11" bitLen="16" halPin="position-fb" halType="s32"/>
        </pdo>
      </syncManager>
    </slave>

    <slave idx="2" type="generic" vid="${ETHERCAT_EL7031_VID}" pid="${ETHERCAT_EL7031_PID}" configPdos="true">
      <dcConf assignActivate="300" sync0Cycle="*1" sync0Shift="0"/>
      <syncManager idx="2" dir="out">
        <pdo idx="1600">
          <pdoEntry idx="7010" subIdx="01" bitLen="1" halPin="st-enable" halType="bit"/>
          <pdoEntry idx="7010" subIdx="11" bitLen="16" halPin="velocity-cmd" halType="s32"/>
        </pdo>
      </syncManager>
      <syncManager idx="3" dir="in">
        <pdo idx="1a00">
          <pdoEntry idx="6010" subIdx="04" bitLen="1" halPin="error" halType="bit"/>
          <pdoEntry idx="6010" subIdx="11" bitLen="16" halPin="position-fb" halType="s32"/>
        </pdo>
      </syncManager>
    </slave>
  </master>
</masters>
