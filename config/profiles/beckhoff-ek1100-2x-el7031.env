# LinuxCNC Machine Profile: Beckhoff EK1100 + 2x EL7031
# Hardware profile for a 2-axis stepper setup on EtherCAT.

# Profile metadata
PROFILE_NAME="Beckhoff EK1100 + 2x EL7031"
PROFILE_MODE="ethercat"  # sim | ethercat

# Template selection (optional overrides consumed by ralph/configure.sh)
MACHINE_INI_TEMPLATE="machine-2axis.ini"
MACHINE_HAL_TEMPLATE="machine-2axis-el7031.hal"
ETHERCAT_CONF_TEMPLATE="ethercat-conf.xml"

# Machine geometry
MACHINE_NAME="linuxcnc-beckhoff-2axis-el7031"
COORDINATES="XY"
NUM_JOINTS=2
KINEMATICS="trivkins coordinates=XY"
LINEAR_UNITS="mm"
ANGULAR_UNITS="degree"

# Drive type
DRIVE_TYPE="beckhoff-el7031"

# EtherCAT chain: EK1100 coupler + 2x EL7031
ETHERCAT_SLAVE_COUNT=3
ETHERCAT_APP_TIME_PERIOD=1000000
ETHERCAT_REF_CLOCK_SYNC_CYCLES=-1

ETHERCAT_COUPLER_VID="00000002"
ETHERCAT_COUPLER_PID="044c2c52"
ETHERCAT_EL7031_VID="00000002"
ETHERCAT_EL7031_PID="1b773052"

# Servo thread period (ns)
SERVO_PERIOD=1000000

# Following error tolerances (mm)
FERROR=5.0
MIN_FERROR=1.0

# --- Axis X / Joint 0 ---
AXIS_X_MAX_VEL=10.0
AXIS_X_MAX_ACCEL=100.0
AXIS_X_MIN_LIMIT=-100.0
AXIS_X_MAX_LIMIT=100.0
AXIS_X_HOME=0.0
AXIS_X_SCALE=1.0

# --- Axis Y / Joint 1 ---
AXIS_Y_MAX_VEL=10.0
AXIS_Y_MAX_ACCEL=100.0
AXIS_Y_MIN_LIMIT=-100.0
AXIS_Y_MAX_LIMIT=100.0
AXIS_Y_HOME=0.0
AXIS_Y_SCALE=1.0

# Display
DEFAULT_LINEAR_VELOCITY=2.0
MAX_LINEAR_VELOCITY=10.0
INCREMENTS="5mm 1mm .5mm .1mm"

# SSH connection to target/VM
VM_SSH_PORT=2222
VM_SSH_USER=cnc
VM_SSH_HOST=localhost
VM_LINUXCNC_DIR=/home/cnc/linuxcnc
